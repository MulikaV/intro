"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

exports.__esModule = true;
exports.getRequestsConfig = getRequestsConfig;
exports["default"] = getRequestInstance;

var _regenerator = _interopRequireDefault(require("@babel/runtime/regenerator"));

var _effects = require("redux-saga/effects");

var _constants = require("../constants");

var _marked =
/*#__PURE__*/
_regenerator["default"].mark(getRequestInstance);

function getRequestsConfig() {
  return (0, _effects.getContext)(_constants.REQUESTS_CONFIG);
}

function getRequestInstance(driverType) {
  var config, driver;
  return _regenerator["default"].wrap(function getRequestInstance$(_context) {
    while (1) {
      switch (_context.prev = _context.next) {
        case 0:
          if (driverType === void 0) {
            driverType = null;
          }

          _context.next = 3;
          return getRequestsConfig();

        case 3:
          config = _context.sent;
          driver = driverType ? config.driver[driverType] : config.driver["default"] || config.driver;
          return _context.abrupt("return", driver.requestInstance);

        case 6:
        case "end":
          return _context.stop();
      }
    }
  }, _marked);
}