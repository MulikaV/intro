{"ast":null,"code":"import _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/objectWithoutPropertiesLoose\";\nimport _extends from \"@babel/runtime/helpers/extends\";\n\nfunction _toPropertyKey(arg) {\n  var key = _toPrimitive(arg, \"string\");\n\n  return typeof key === \"symbol\" ? key : String(key);\n}\n\nfunction _toPrimitive(input, hint) {\n  if (typeof input !== \"object\" || input === null) return input;\n  var prim = input[Symbol.toPrimitive];\n\n  if (prim !== undefined) {\n    var res = prim.call(input, hint || \"default\");\n    if (typeof res !== \"object\") return res;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n\n  return (hint === \"string\" ? String : Number)(input);\n}\n\nimport { isErrorAction, isResponseAction, getRequestActionFromResponse } from '../actions';\n\nvar mutationConfigHasRequestKey = function mutationConfigHasRequestKey(config) {\n  return typeof config !== 'boolean' && !!config.getRequestKey;\n};\n\nvar updateMutationsForRequest = function updateMutationsForRequest(state, action, mutationConfig) {\n  var _extends4;\n\n  if (mutationConfig.local) {\n    return state;\n  }\n\n  if (mutationConfigHasRequestKey(mutationConfig)) {\n    var _extends2, _extends3;\n\n    var requestKey = mutationConfig.getRequestKey(action);\n    return _extends({}, state, (_extends3 = {}, _extends3[action.type] = _extends({}, state[action.type], (_extends2 = {}, _extends2[requestKey] = {\n      error: null,\n      pending: state[action.type] && state[action.type][requestKey] ? state[action.type][requestKey].pending + 1 : 1\n    }, _extends2)), _extends3));\n  }\n\n  return _extends({}, state, (_extends4 = {}, _extends4[action.type] = {\n    error: null,\n    pending: (state[action.type] ? state[action.type].pending : 0) + 1\n  }, _extends4));\n};\n\nexport default (function (state, action, config, mutationConfig) {\n  var _extends8;\n\n  if (!isResponseAction(action)) {\n    return updateMutationsForRequest(state, action, mutationConfig);\n  }\n\n  var requestAction = getRequestActionFromResponse(action);\n\n  var _requestAction$type = requestAction.type,\n      currentMutation = state[_requestAction$type],\n      otherMutations = _objectWithoutPropertiesLoose(state, [_requestAction$type].map(_toPropertyKey));\n\n  if (isErrorAction(action)) {\n    var _extends5, _extends6;\n\n    return _extends({}, otherMutations, (_extends6 = {}, _extends6[requestAction.type] = mutationConfigHasRequestKey(mutationConfig) ? _extends({}, currentMutation, (_extends5 = {}, _extends5[mutationConfig.getRequestKey(requestAction)] = {\n      error: config.getError(state, action, config),\n      pending: currentMutation[mutationConfig.getRequestKey(requestAction)].pending - 1\n    }, _extends5)) : {\n      error: config.getError(state, action, config),\n      pending: currentMutation.pending - 1\n    }, _extends6));\n  } // success or abort case\n\n\n  var getUpdatedCurrentMutation = function getUpdatedCurrentMutation() {\n    if (!mutationConfigHasRequestKey(mutationConfig)) {\n      return {\n        error: null,\n        pending: currentMutation.pending - 1\n      };\n    }\n\n    var currentRequestKey = mutationConfig.getRequestKey(requestAction);\n\n    var mutationForRequestKey = currentMutation[currentRequestKey],\n        remainingMutations = _objectWithoutPropertiesLoose(currentMutation, [currentRequestKey].map(_toPropertyKey));\n\n    if (mutationForRequestKey.pending !== 1) {\n      var _extends7;\n\n      return _extends({}, remainingMutations, (_extends7 = {}, _extends7[currentRequestKey] = {\n        error: null,\n        pending: mutationForRequestKey.pending - 1\n      }, _extends7));\n    }\n\n    return remainingMutations;\n  };\n\n  return _extends({}, otherMutations, (_extends8 = {}, _extends8[requestAction.type] = getUpdatedCurrentMutation(), _extends8));\n});","map":{"version":3,"sources":["/var/www/sites/Intro/node_modules/redux-saga-requests/es/reducers/mutations-reducer.js"],"names":["_objectWithoutPropertiesLoose","_extends","_toPropertyKey","arg","key","_toPrimitive","String","input","hint","prim","Symbol","toPrimitive","undefined","res","call","TypeError","Number","isErrorAction","isResponseAction","getRequestActionFromResponse","mutationConfigHasRequestKey","config","getRequestKey","updateMutationsForRequest","state","action","mutationConfig","_extends4","local","_extends2","_extends3","requestKey","type","error","pending","_extends8","requestAction","_requestAction$type","currentMutation","otherMutations","map","_extends5","_extends6","getError","getUpdatedCurrentMutation","currentRequestKey","mutationForRequestKey","remainingMutations","_extends7"],"mappings":"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","sourcesContent":["import _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/objectWithoutPropertiesLoose\";\nimport _extends from \"@babel/runtime/helpers/extends\";\n\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return typeof key === \"symbol\" ? key : String(key); }\n\nfunction _toPrimitive(input, hint) { if (typeof input !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (typeof res !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\n\nimport { isErrorAction, isResponseAction, getRequestActionFromResponse } from '../actions';\n\nvar mutationConfigHasRequestKey = function mutationConfigHasRequestKey(config) {\n  return typeof config !== 'boolean' && !!config.getRequestKey;\n};\n\nvar updateMutationsForRequest = function updateMutationsForRequest(state, action, mutationConfig) {\n  var _extends4;\n\n  if (mutationConfig.local) {\n    return state;\n  }\n\n  if (mutationConfigHasRequestKey(mutationConfig)) {\n    var _extends2, _extends3;\n\n    var requestKey = mutationConfig.getRequestKey(action);\n    return _extends({}, state, (_extends3 = {}, _extends3[action.type] = _extends({}, state[action.type], (_extends2 = {}, _extends2[requestKey] = {\n      error: null,\n      pending: state[action.type] && state[action.type][requestKey] ? state[action.type][requestKey].pending + 1 : 1\n    }, _extends2)), _extends3));\n  }\n\n  return _extends({}, state, (_extends4 = {}, _extends4[action.type] = {\n    error: null,\n    pending: (state[action.type] ? state[action.type].pending : 0) + 1\n  }, _extends4));\n};\n\nexport default (function (state, action, config, mutationConfig) {\n  var _extends8;\n\n  if (!isResponseAction(action)) {\n    return updateMutationsForRequest(state, action, mutationConfig);\n  }\n\n  var requestAction = getRequestActionFromResponse(action);\n\n  var _requestAction$type = requestAction.type,\n      currentMutation = state[_requestAction$type],\n      otherMutations = _objectWithoutPropertiesLoose(state, [_requestAction$type].map(_toPropertyKey));\n\n  if (isErrorAction(action)) {\n    var _extends5, _extends6;\n\n    return _extends({}, otherMutations, (_extends6 = {}, _extends6[requestAction.type] = mutationConfigHasRequestKey(mutationConfig) ? _extends({}, currentMutation, (_extends5 = {}, _extends5[mutationConfig.getRequestKey(requestAction)] = {\n      error: config.getError(state, action, config),\n      pending: currentMutation[mutationConfig.getRequestKey(requestAction)].pending - 1\n    }, _extends5)) : {\n      error: config.getError(state, action, config),\n      pending: currentMutation.pending - 1\n    }, _extends6));\n  } // success or abort case\n\n\n  var getUpdatedCurrentMutation = function getUpdatedCurrentMutation() {\n    if (!mutationConfigHasRequestKey(mutationConfig)) {\n      return {\n        error: null,\n        pending: currentMutation.pending - 1\n      };\n    }\n\n    var currentRequestKey = mutationConfig.getRequestKey(requestAction);\n\n    var mutationForRequestKey = currentMutation[currentRequestKey],\n        remainingMutations = _objectWithoutPropertiesLoose(currentMutation, [currentRequestKey].map(_toPropertyKey));\n\n    if (mutationForRequestKey.pending !== 1) {\n      var _extends7;\n\n      return _extends({}, remainingMutations, (_extends7 = {}, _extends7[currentRequestKey] = {\n        error: null,\n        pending: mutationForRequestKey.pending - 1\n      }, _extends7));\n    }\n\n    return remainingMutations;\n  };\n\n  return _extends({}, otherMutations, (_extends8 = {}, _extends8[requestAction.type] = getUpdatedCurrentMutation(), _extends8));\n});"]},"metadata":{},"sourceType":"module"}